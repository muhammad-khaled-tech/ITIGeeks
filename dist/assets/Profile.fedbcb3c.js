import{r as l,j as a,d as t}from"./vendor-react.06bced68.js";import{u as _,y as H,z as W,A as Y,B as $,C as q,D as J,h as j,L as F}from"./index.17f04fdd.js";import{B as K}from"./Badge.32afea85.js";import{a as T,b as z}from"./vendor-firebase.bbe5d1cc.js";import{C as Q,R as V,P as X,L as Z,i as ee,p as ae,a as te,b as re}from"./vendor-charts.b93ad1dd.js";import{B as se}from"./Breadcrumbs.63a79896.js";import"./vendor-ui.c6987468.js";Q.register(V,X,Z,ee,ae,te);const ge=()=>{var v,y,k,w,S,C,U,L,P,B;const{userData:e,updateUserData:g}=_(),[x,h]=l.exports.useState((e==null?void 0:e.leetcodeUsername)||""),[A,b]=l.exports.useState(!1),[le,i]=l.exports.useState("Loading..."),[G,o]=l.exports.useState("Loading..."),[p,I]=l.exports.useState(null),[m,R]=l.exports.useState(null),[u,f]=l.exports.useState(!0);l.exports.useEffect(()=>{(async()=>{if(e!=null&&e.groupId)try{const s=T(j,"groups",e.groupId),d=await z(s);if(d.exists()){const c=d.data();i(c.name);const n=c.trackId||e.trackId;if(n){const O=T(j,"tracks",n),E=await z(O);E.exists()?o(E.data().name):o("Unknown Track")}else o("No Track")}else i("Unknown Group"),o("Unknown Track")}catch(s){console.error("Error fetching group/track:",s),i("Error"),o("Error")}else i("No Group"),o("No Track")})()},[e]),l.exports.useEffect(()=>{(async()=>{if(e!=null&&e.leetcodeUsername){f(!0);try{const[s,d]=await Promise.all([F.getSkillStats(e.leetcodeUsername),F.getLanguageStats(e.leetcodeUsername)]);I(s),R(d)}catch(s){console.error("Error fetching LC stats:",s)}finally{f(!1)}}})()},[e==null?void 0:e.leetcodeUsername]),l.exports.useEffect(()=>{var c;if(!e)return;const r=new Set(e.badges||[]);let s=[];const d=((c=e.problems)==null?void 0:c.filter(n=>n.status==="Done").length)||0;if(d>=10&&!r.has("Bronze Coder")&&s.push("Bronze Coder"),d>=50&&!r.has("Silver Coder")&&s.push("Silver Coder"),d>=100&&!r.has("Gold Coder")&&s.push("Gold Coder"),s.length>0){const n=[...e.badges||[],...s];g({...e,badges:n}),alert(`Congratulations! You earned new badges: ${s.join(", ")}`)}},[e]);const D=async()=>{b(!0);try{let r=x.trim();r.includes("leetcode.com/u/")&&(r=r.split("/u/")[1].split("/")[0]),await g({...e,leetcodeUsername:r}),h(r),alert("Profile updated!")}catch(r){console.error(r),alert("Failed to update profile.")}finally{b(!1)}};if(!e)return a("div",{children:"Loading..."});const N=p?{labels:((k=(y=(v=p.data)==null?void 0:v.matchedUser)==null?void 0:y.tagProblemCounts)==null?void 0:k.advanced.slice(0,6).map(r=>r.tagName))||["Arrays","Strings","DP","Math","Trees","Graphs"],datasets:[{label:"Solved Problems",data:((C=(S=(w=p.data)==null?void 0:w.matchedUser)==null?void 0:S.tagProblemCounts)==null?void 0:C.advanced.slice(0,6).map(r=>r.problemsSolved))||[0,0,0,0,0,0],backgroundColor:"rgba(255, 161, 22, 0.2)",borderColor:"rgba(255, 161, 22, 1)",borderWidth:2}]}:null,M={scales:{r:{angleLines:{color:"rgba(255, 255, 255, 0.1)"},grid:{color:"rgba(255, 255, 255, 0.1)"},pointLabels:{color:"#ccc",font:{size:10}},suggestedMin:0}},plugins:{legend:{display:!1}}};return t("div",{className:"max-w-4xl mx-auto py-4 px-4",children:[a(se,{}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t("div",{className:"lg:col-span-1 space-y-6",children:[t("div",{className:"bg-white dark:bg-leet-card rounded-2xl shadow-xl p-6 text-center",children:[a("div",{className:"w-24 h-24 bg-brand rounded-full mx-auto mb-4 flex items-center justify-center text-white text-3xl font-bold",children:(U=e.displayName)==null?void 0:U.charAt(0).toUpperCase()}),a("h2",{className:"text-xl font-bold dark:text-white capitalize",children:e.displayName}),t("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:["@",e.leetcodeUsername||"notset"]}),t("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[a("span",{className:"px-3 py-1 bg-brand/10 text-brand rounded-full text-xs font-bold uppercase",children:e.role}),a("span",{className:"px-3 py-1 bg-green-500/10 text-green-500 rounded-full text-xs font-bold uppercase",children:G})]}),t("div",{className:"mt-8 pt-6 border-t dark:border-leet-border",children:[a("label",{className:"block text-xs font-bold text-gray-400 uppercase text-left mb-2",children:"Update LeetCode"}),t("div",{className:"flex gap-2",children:[a("input",{type:"text",value:x,onChange:r=>h(r.target.value),placeholder:"Username",className:"flex-grow rounded-lg border-gray-300 dark:border-leet-border dark:bg-leet-input dark:text-leet-text text-sm py-1.5 px-3"}),a("button",{onClick:D,disabled:A,className:"bg-brand hover:bg-brand-hover text-white p-2 rounded-lg disabled:opacity-50",children:a(H,{})})]})]})]}),t("div",{className:"bg-white dark:bg-leet-card rounded-2xl shadow-xl p-6",children:[t("h3",{className:"text-sm font-bold uppercase text-gray-400 mb-4 flex items-center gap-2",children:[a(W,{className:"text-yellow-500"})," Achievements"]}),a("div",{className:"flex flex-wrap gap-3 justify-center",children:e.badges&&e.badges.length>0?e.badges.map((r,s)=>t("div",{className:"group relative",children:[a(K,{name:r,size:"md"}),a("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-black text-white text-[10px] rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:r})]},s)):a("p",{className:"text-xs text-gray-500 text-center py-4",children:"Solve problems to unlock badges!"})})]})]}),t("div",{className:"lg:col-span-2 space-y-6",children:[t("div",{className:"bg-gradient-to-br from-brand to-brand-hover rounded-2xl p-8 text-white shadow-xl relative overflow-hidden",children:[a(Y,{className:"absolute bottom-4 right-4 text-7xl opacity-10"}),t("div",{className:"relative z-10",children:[a("p",{className:"text-sm font-bold uppercase opacity-80",children:"Overall Progress Points"}),a("h1",{className:"text-5xl font-black italic mt-1",children:(e.easySolved||0)*25+(e.mediumSolved||0)*50+(e.hardSolved||0)*100+(e.streak||0)*10}),t("div",{className:"mt-4 flex items-center gap-4 text-sm",children:[t("span",{className:"p-2 bg-white/10 rounded-lg flex items-center gap-1",children:[a($,{className:"text-orange-300"})," ",e.streak||0," Day Streak"]}),t("span",{className:"p-2 bg-white/10 rounded-lg flex items-center gap-1 text-blue-100",children:["Bonus: +",(e.streak||0)*10]})]})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"bg-white dark:bg-leet-card rounded-2xl shadow-xl p-6",children:[t("h3",{className:"text-sm font-bold uppercase text-gray-400 mb-6 flex items-center gap-2",children:[a(q,{className:"text-brand"})," Advanced Skills"]}),a("div",{className:"h-64 flex items-center justify-center",children:u?a("div",{className:"animate-pulse w-full h-full bg-gray-200 dark:bg-gray-800 rounded-lg"}):N?a(re,{data:N,options:M}):a("p",{className:"text-gray-500",children:"No data available"})})]}),t("div",{className:"bg-white dark:bg-leet-card rounded-2xl shadow-xl p-6",children:[t("h3",{className:"text-sm font-bold uppercase text-gray-400 mb-6 flex items-center gap-2",children:[a(J,{className:"text-green-500"})," Languages"]}),a("div",{className:"space-y-4",children:u?[1,2,3].map(r=>a("div",{className:"h-10 animate-pulse bg-gray-200 dark:bg-gray-800 rounded-lg"},r)):((B=(P=(L=m==null?void 0:m.data)==null?void 0:L.matchedUser)==null?void 0:P.languageProblemCount)==null?void 0:B.slice(0,4).map((r,s)=>t("div",{className:"bg-gray-50 dark:bg-leet-input p-3 rounded-xl flex justify-between items-center transition-transform hover:scale-[1.02]",children:[a("span",{className:"font-bold dark:text-gray-200",children:r.languageName}),a("span",{className:"text-brand font-black",children:r.problemsSolved})]},s)))||a("p",{className:"text-gray-500 text-center py-8 text-sm",children:"No data found"})})]})]}),t("div",{className:"bg-white dark:bg-leet-card rounded-2xl shadow-xl p-6",children:[a("h3",{className:"text-sm font-bold uppercase text-gray-400 mb-6",children:"Mastery Breakdown"}),t("div",{className:"grid grid-cols-3 gap-4",children:[t("div",{className:"text-center p-4 bg-green-500/5 rounded-2xl border border-green-500/10",children:[a("p",{className:"text-xs text-green-500 font-bold uppercase mb-1",children:"Easy"}),a("p",{className:"text-2xl font-black dark:text-white",children:e.easySolved||0})]}),t("div",{className:"text-center p-4 bg-yellow-500/5 rounded-2xl border border-yellow-500/10",children:[a("p",{className:"text-xs text-yellow-500 font-bold uppercase mb-1",children:"Medium"}),a("p",{className:"text-2xl font-black dark:text-white",children:e.mediumSolved||0})]}),t("div",{className:"text-center p-4 bg-red-500/5 rounded-2xl border border-red-500/10",children:[a("p",{className:"text-xs text-red-500 font-bold uppercase mb-1",children:"Hard"}),a("p",{className:"text-2xl font-black dark:text-white",children:e.hardSolved||0})]})]})]})]})]})]})};export{ge as default};
