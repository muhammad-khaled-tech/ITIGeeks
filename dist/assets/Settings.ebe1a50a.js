import{l as A,r as p,j as e,d as n,F as f}from"./vendor-react.06bced68.js";import{h as x,ab as k,y as T,a6 as $,ap as E,aq as I,D as M,a9 as R,f as y}from"./index.17f04fdd.js";import{b as F,a as v,m as j}from"./vendor-firebase.bbe5d1cc.js";import"./vendor-ui.c6987468.js";const G=()=>{const{isDark:t}=A()||{isDark:!0},[l,o]=p.exports.useState(!0),[d,m]=p.exports.useState(!1),[b,h]=p.exports.useState(!1),[r,u]=p.exports.useState({appName:"ITIGeeks",appTagline:"LeetCode Tracker for ITI Students",defaultTheme:"dark",allowRegistration:!0,requireApproval:!1,leetcodeApiEnabled:!0,contestNotifications:!0,assignmentReminders:!0,adminEmails:"",maintenanceMode:!1,maintenanceMessage:"We are currently performing maintenance. Please check back soon.",geminiApiKey:""});p.exports.useEffect(()=>{N()},[]);const N=async()=>{try{const a=await F(v(x,"settings","app"));a.exists()&&u({...r,...a.data()})}catch(a){console.error("Error fetching settings:",a)}finally{o(!1)}},w=async()=>{m(!0);try{await j(v(x,"settings","app"),{...r,updatedAt:new Date().toISOString()}),h(!0),setTimeout(()=>h(!1),3e3)}catch(a){console.error("Error saving settings:",a),alert("Error saving settings")}finally{m(!1)}},i=(a,S)=>{u(C=>({...C,[a]:S}))};return l?e("div",{className:"flex items-center justify-center h-64",children:e("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-brand border-t-transparent"})}):n("div",{className:"space-y-6 max-w-4xl",children:[n("div",{className:"flex justify-between items-center",children:[n("div",{children:[e("h1",{className:`text-2xl font-bold ${t?"text-leet-text":"text-gray-900"}`,children:"Settings"}),e("p",{className:t?"text-leet-sub":"text-gray-500",children:"Configure your application"})]}),e("button",{onClick:w,disabled:d,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${b?"bg-green-600 text-white":"bg-brand hover:bg-brand-hover text-white"} disabled:opacity-50`,children:b?n(f,{children:[e(k,{})," Saved!"]}):d?"Saving...":n(f,{children:[e(T,{})," Save Changes"]})})]}),n(c,{isDark:t,icon:e($,{}),title:"General",children:[e(s,{isDark:t,label:"App Name",description:"The name displayed in the header and browser tab",children:e("input",{type:"text",value:r.appName,onChange:a=>i("appName",a.target.value),className:`w-64 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand/20 ${t?"bg-leet-input text-leet-text border border-leet-border":"bg-gray-100"}`})}),e(s,{isDark:t,label:"Tagline",description:"Subtitle shown on the landing page",children:e("input",{type:"text",value:r.appTagline,onChange:a=>i("appTagline",a.target.value),className:`w-64 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand/20 ${t?"bg-leet-input text-leet-text border border-leet-border":"bg-gray-100"}`})})]}),e(c,{isDark:t,icon:e(E,{}),title:"Appearance",children:e(s,{isDark:t,label:"Default Theme",description:"Default theme for new users",children:n("select",{value:r.defaultTheme,onChange:a=>i("defaultTheme",a.target.value),className:`w-40 px-4 py-2 rounded-lg focus:outline-none ${t?"bg-leet-input text-leet-text border border-leet-border":"bg-gray-100"}`,children:[e("option",{value:"dark",children:"Dark"}),e("option",{value:"light",children:"Light"}),e("option",{value:"system",children:"System"})]})})}),n(c,{isDark:t,icon:e(I,{}),title:"Access Control",children:[e(s,{isDark:t,label:"Allow Registration",description:"Allow new users to sign up",children:e(g,{isDark:t,checked:r.allowRegistration,onChange:a=>i("allowRegistration",a)})}),e(s,{isDark:t,label:"Require Approval",description:"New users must be approved by admin",children:e(g,{isDark:t,checked:r.requireApproval,onChange:a=>i("requireApproval",a)})}),e(s,{isDark:t,label:"Admin Emails",description:"Comma-separated list of admin emails",children:e("input",{type:"text",value:r.adminEmails,onChange:a=>i("adminEmails",a.target.value),placeholder:"admin@example.com, ...",className:`w-80 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand/20 ${t?"bg-leet-input text-leet-text border border-leet-border":"bg-gray-100"}`})})]}),n(c,{isDark:t,icon:e(M,{}),title:"Integrations",children:[e(s,{isDark:t,label:"LeetCode API",description:"Enable LeetCode problem syncing",children:e(g,{isDark:t,checked:r.leetcodeApiEnabled,onChange:a=>i("leetcodeApiEnabled",a)})}),e("div",{className:"border-t dark:border-leet-border my-4"}),e(s,{isDark:t,label:"Gemini API Key",description:"Implicitly used by all students for AI features",children:e("input",{type:"password",value:r.geminiApiKey||"",onChange:a=>i("geminiApiKey",a.target.value),placeholder:"AIzaSy...",className:`w-80 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand/20 ${t?"bg-leet-input text-leet-text border border-leet-border":"bg-gray-100"}`})})]}),n(c,{isDark:t,icon:e(R,{}),title:"Notifications",children:[e(s,{isDark:t,label:"Contest Notifications",description:"Send notifications for new contests",children:e(g,{isDark:t,checked:r.contestNotifications,onChange:a=>i("contestNotifications",a)})}),e(s,{isDark:t,label:"Assignment Reminders",description:"Send reminders before assignment deadlines",children:e(g,{isDark:t,checked:r.assignmentReminders,onChange:a=>i("assignmentReminders",a)})})]}),n(c,{isDark:t,icon:e(y,{}),title:"Maintenance",children:[e(s,{isDark:t,label:"Maintenance Mode",description:"Show maintenance page to users",children:e(g,{isDark:t,checked:r.maintenanceMode,onChange:a=>i("maintenanceMode",a)})}),r.maintenanceMode&&e(s,{isDark:t,label:"Maintenance Message",description:"Message shown during maintenance",children:e("textarea",{value:r.maintenanceMessage,onChange:a=>i("maintenanceMessage",a.target.value),rows:2,className:`w-80 px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand/20 ${t?"bg-leet-input text-leet-text border border-leet-border":"bg-gray-100"}`})})]}),n("div",{className:`rounded-lg p-6 border-2 border-red-500/30 ${t?"bg-red-900/10":"bg-red-50"}`,children:[n("h3",{className:"font-bold mb-4 flex items-center gap-2 text-red-500",children:[e(y,{})," Danger Zone"]}),e("div",{className:"space-y-4",children:n("div",{className:"flex items-center justify-between",children:[n("div",{children:[e("p",{className:`font-medium ${t?"text-leet-text":"text-gray-900"}`,children:"Reset All Settings"}),e("p",{className:`text-sm ${t?"text-leet-sub":"text-gray-500"}`,children:"Restore all settings to default values"})]}),e("button",{onClick:()=>{confirm("Are you sure you want to reset all settings?")&&u({appName:"ITIGeeks",appTagline:"LeetCode Tracker for ITI Students",defaultTheme:"dark",allowRegistration:!0,requireApproval:!1,leetcodeApiEnabled:!0,contestNotifications:!0,assignmentReminders:!0,adminEmails:"",maintenanceMode:!1,maintenanceMessage:"We are currently performing maintenance. Please check back soon."})},className:"px-4 py-2 rounded-lg border border-red-500 text-red-500 hover:bg-red-500 hover:text-white transition-colors",children:"Reset Settings"})]})})]})]})},c=({isDark:t,icon:l,title:o,children:d})=>n("div",{className:`rounded-lg overflow-hidden ${t?"bg-leet-card border border-leet-border":"bg-white shadow"}`,children:[e("div",{className:`px-6 py-4 border-b ${t?"border-leet-border":"border-gray-200"}`,children:n("h3",{className:`font-bold flex items-center gap-2 ${t?"text-leet-text":"text-gray-900"}`,children:[l," ",o]})}),e("div",{className:"p-6 space-y-4",children:d})]}),s=({isDark:t,label:l,description:o,children:d})=>n("div",{className:"flex items-center justify-between",children:[n("div",{children:[e("p",{className:`font-medium ${t?"text-leet-text":"text-gray-900"}`,children:l}),e("p",{className:`text-sm ${t?"text-leet-sub":"text-gray-500"}`,children:o})]}),d]}),g=({isDark:t,checked:l,onChange:o})=>e("button",{onClick:()=>o(!l),className:`relative w-12 h-6 rounded-full transition-colors ${l?"bg-brand":t?"bg-leet-input":"bg-gray-300"}`,children:e("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${l?"translate-x-7":"translate-x-1"}`})});export{G as default};
