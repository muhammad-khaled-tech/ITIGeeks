import{r as d,j as t,b as s,L as c}from"./vendor-react.0fccfa0d.js";import{u as h,q as f,z as w,G as y,B as N}from"./index.b7413c0c.js";import{R as v,x as k,h as C,I as L}from"./vendor-firebase.278f80a4.js";import"./vendor-ui.218f6aa3.js";function E(){const{userData:n,isAdmin:m}=h(),[i,b]=d.exports.useState([]),[u,x]=d.exports.useState(!0);d.exports.useEffect(()=>{const e=v(C(N,"contests"),k("startTime","desc"));return L(e,a=>{const p=a.docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.targetGroup==="All"||(n==null?void 0:n.groupId)&&o.targetGroup===n.groupId);b(p),x(!1)})},[n]);const g=e=>{const r=new Date,a=new Date(e.startTime),l=new Date(e.endTime);return r<a?{label:"Upcoming",color:"bg-blue-100 text-blue-800"}:r>=a&&r<=l?{label:"Active",color:"bg-green-100 text-green-800 animate-pulse"}:{label:"Ended",color:"bg-gray-100 text-gray-800"}};return u?t("div",{className:"p-6 text-center",children:"Loading contests..."}):s("div",{className:"max-w-5xl mx-auto p-6",children:[s("div",{className:"flex justify-between items-center mb-8",children:[s("h1",{className:"text-3xl font-bold flex items-center gap-2 dark:text-white",children:[t(f,{className:"text-yellow-500"})," Contest Lobby"]}),m&&s(c,{to:"/contests/create",className:"flex items-center gap-2 bg-brand hover:bg-brand-hover text-white font-bold py-2 px-4 rounded transition",children:[t(w,{})," Create Contest"]})]}),s("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[i.map(e=>{const r=g(e);return t("div",{className:"bg-white dark:bg-leet-card rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-leet-border hover:shadow-lg transition",children:s("div",{className:"p-5",children:[s("div",{className:"flex justify-between items-start mb-4",children:[t("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${r.color}`,children:r.label}),s("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[t(y,{})," ",new Date(e.startTime).toLocaleDateString()]})]}),t("h3",{className:"text-xl font-bold mb-2 dark:text-white",children:e.title}),s("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:[e.problems.length," Problems \u2022 ",e.problems.reduce((a,l)=>a+l.score,0)," Points"]}),t(c,{to:`/contests/${e.id}`,className:"block w-full text-center bg-brand hover:bg-brand-hover text-white font-medium py-2 rounded transition",children:r.label==="Ended"?"View Results":"Enter Arena"})]})},e.id)}),i.length===0&&t("div",{className:"col-span-full text-center py-10 text-gray-500",children:"No contests found for your group."})]})]})}export{E as default};
