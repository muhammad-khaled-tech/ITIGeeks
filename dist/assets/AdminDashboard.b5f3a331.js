import{r as s,j as a,b as r}from"./vendor-react.4d235dc1.js";import{u as I,p as T,q as N,r as A,s as i}from"./index.87213db3.js";import{f as k,h as m,p as w}from"./vendor-firebase.278f80a4.js";import"./vendor-ui.7a96cdac.js";const F=()=>{const{isAdmin:p}=I(),[c,h]=s.exports.useState([]),[g,x]=s.exports.useState([]),[n,b]=s.exports.useState(""),[l,f]=s.exports.useState(""),[o,v]=s.exports.useState("");s.exports.useEffect(()=>{(async()=>{if(!p)return;const t=await k(m(i,"tracks"));h(t.docs.map(d=>({id:d.id,...d.data()})));const u=await k(m(i,"groups"));x(u.docs.map(d=>({id:d.id,...d.data()})))})()},[p]);const y=async e=>{if(e.preventDefault(),!!n.trim())try{const t=await w(m(i,"tracks"),{name:n,headLeaderId:""});h([...c,{id:t.id,name:n,headLeaderId:""}]),b("")}catch(t){console.error(t)}},S=async e=>{if(e.preventDefault(),!(!l.trim()||!o))try{const t=await w(m(i,"groups"),{name:l,trackId:o,supervisorId:""});x([...g,{id:t.id,name:l,trackId:o,supervisorId:""}]),f("")}catch(t){console.error(t)}};return p?r("div",{className:"max-w-4xl mx-auto p-6",children:[a("h1",{className:"text-3xl font-bold mb-8 dark:text-white",children:"Admin Dashboard"}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r("div",{className:"bg-white dark:bg-leet-card rounded-lg shadow p-6",children:[r("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2 dark:text-white",children:[a(T,{className:"text-brand"})," Manage Tracks"]}),r("form",{onSubmit:y,className:"flex gap-2 mb-4",children:[a("input",{type:"text",value:n,onChange:e=>b(e.target.value),placeholder:"New Track Name",className:"flex-grow rounded border p-2 dark:bg-leet-input dark:text-white"}),a("button",{type:"submit",className:"bg-green-600 text-white p-2 rounded hover:bg-green-700",children:a(N,{})})]}),a("ul",{className:"space-y-2",children:c.map(e=>a("li",{className:"p-2 bg-gray-50 dark:bg-leet-input rounded dark:text-gray-300",children:e.name},e.id))})]}),r("div",{className:"bg-white dark:bg-leet-card rounded-lg shadow p-6",children:[r("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2 dark:text-white",children:[a(A,{className:"text-blue-500"})," Manage Groups"]}),r("form",{onSubmit:S,className:"flex flex-col gap-2 mb-4",children:[r("select",{value:o,onChange:e=>v(e.target.value),className:"rounded border p-2 dark:bg-leet-input dark:text-white",children:[a("option",{value:"",children:"Select Track"}),c.map(e=>a("option",{value:e.id,children:e.name},e.id))]}),r("div",{className:"flex gap-2",children:[a("input",{type:"text",value:l,onChange:e=>f(e.target.value),placeholder:"New Group Name",className:"flex-grow rounded border p-2 dark:bg-leet-input dark:text-white"}),a("button",{type:"submit",className:"bg-blue-600 text-white p-2 rounded hover:bg-blue-700",children:a(N,{})})]})]}),a("ul",{className:"space-y-2",children:g.map(e=>{var t;return r("li",{className:"p-2 bg-gray-50 dark:bg-leet-input rounded dark:text-gray-300",children:[a("span",{className:"font-bold",children:e.name})," ",r("span",{className:"text-xs text-gray-500",children:["(",(t=c.find(u=>u.id===e.trackId))==null?void 0:t.name,")"]})]},e.id)})})]})]})]}):a("div",{className:"text-red-500 p-6",children:"Access Denied"})};export{F as default};
