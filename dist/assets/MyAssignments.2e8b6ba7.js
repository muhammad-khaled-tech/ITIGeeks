import{a,j as e,Q as w,S as y,L as v,u as N,r as x,P as k,R as A,y as D,z as L,B as S,H as $,x as j}from"./index.676580a2.js";const M=({assignment:t,progress:i,isStudent:g=!0})=>{const{title:m,deadline:d,problems:h,id:n}=t,r=h.length,s=i||0,l=Math.round(s/r*100)||0,o=new Date(d),c=new Date>o&&l<100,f=()=>{const p=new Date,u=o-p;if(u<0)return"Ended";const b=Math.floor(u/(1e3*60*60*24));return b>0?`${b} days left`:`${Math.floor(u/(1e3*60*60))} hours left`};return a("div",{className:`bg-white dark:bg-leet-card rounded-lg shadow-md p-4 border-l-4 ${c?"border-red-500":"border-brand"} hover:shadow-lg transition-shadow`,children:[a("div",{className:"flex justify-between items-start mb-2",children:[e("h3",{className:"font-bold text-lg dark:text-white",children:m}),c&&e(w,{className:"text-red-500",title:"Overdue"})]}),a("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 flex items-center gap-2",children:[e(y,{}),a("span",{className:c?"text-red-500 font-bold":"",children:[new Date(d).toLocaleDateString()," (",f(),")"]})]}),a("div",{className:"mb-4",children:[a("div",{className:"flex justify-between text-xs mb-1 dark:text-gray-300",children:[e("span",{children:"Progress"}),a("span",{children:[s,"/",r," Problems"]})]}),e("div",{className:"w-full bg-gray-200 dark:bg-leet-input rounded-full h-2.5",children:e("div",{className:`h-2.5 rounded-full ${l===100?"bg-green-500":c?"bg-red-500":"bg-brand"}`,style:{width:`${l}%`}})})]}),g?e(v,{to:`/assignments/${n}`,className:"block w-full text-center bg-gray-100 dark:bg-leet-input hover:bg-gray-200 dark:hover:bg-gray-700 text-brand dark:text-brand-dark font-medium py-2 rounded transition-colors",children:"View Details"}):a("div",{className:"text-center text-sm text-gray-500",children:["Target: ",t.targetGroup]})]})},P=()=>{const{userData:t}=N(),[i,g]=x.exports.useState([]),[m,d]=x.exports.useState(!0);x.exports.useEffect(()=>{(async()=>{if(!!t){d(!0);try{const r=A(D(L,"assignments"),S("targetGroup","in",[t.groupId||"All","All"]),$("deadline","asc")),s=await j(r);g(s.docs.map(l=>({id:l.id,...l.data()})))}catch(r){console.error(r)}finally{d(!1)}}})()},[t]);const h=n=>{if(!(t!=null&&t.problems))return 0;new Set(t.problems.filter(s=>s.status==="Done").map(s=>s.title.toLowerCase().replace(/\s+/g,"-")));let r=0;return n.forEach(s=>{t.problems.some(o=>o.title===s.title&&o.status==="Done")&&r++}),r};return m?e("div",{className:"p-10 text-center dark:text-white",children:"Loading Assignments..."}):a("div",{className:"max-w-6xl mx-auto p-6",children:[a("h1",{className:"text-3xl font-bold mb-8 flex items-center gap-2 dark:text-white",children:[e(k,{className:"text-brand"})," My Assignments"]}),i.length===0?e("div",{className:"text-center py-10 bg-white dark:bg-leet-card rounded shadow",children:e("p",{className:"text-gray-500 dark:text-gray-400",children:"No active assignments."})}):e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(n=>e(M,{assignment:n,progress:h(n.problems)},n.id))})]})};export{P as default};
