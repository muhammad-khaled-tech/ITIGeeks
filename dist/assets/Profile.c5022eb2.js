import{r as o,j as t,b as r}from"./vendor-react.4d235dc1.js";import{u,i as h,j as b,k as f,l as v}from"./index.e1876ed1.js";import{B as y}from"./Badge.5da61a7e.js";import"./vendor-firebase.278f80a4.js";import"./vendor-ui.7a96cdac.js";const B=()=>{const{userData:e,updateUserData:n}=u(),[i,c]=o.exports.useState((e==null?void 0:e.leetcodeUsername)||""),[m,g]=o.exports.useState(!1);o.exports.useEffect(()=>{var p;if(!e)return;const a=new Set(e.badges||[]);let s=[];const d=((p=e.problems)==null?void 0:p.filter(l=>l.status==="Done").length)||0;if(d>=10&&!a.has("Bronze Coder")&&s.push("Bronze Coder"),d>=50&&!a.has("Silver Coder")&&s.push("Silver Coder"),d>=100&&!a.has("Gold Coder")&&s.push("Gold Coder"),s.length>0){const l=[...e.badges||[],...s];n({...e,badges:l}),alert(`Congratulations! You earned new badges: ${s.join(", ")}`)}},[e]);const x=async()=>{g(!0);try{let a=i.trim();a.includes("leetcode.com/u/")&&(a=a.split("/u/")[1].split("/")[0]),await n({...e,leetcodeUsername:a}),c(a),alert("Profile updated!")}catch(a){console.error(a),alert("Failed to update profile.")}finally{g(!1)}};return e?r("div",{className:"max-w-2xl mx-auto bg-white dark:bg-leet-card rounded-lg shadow p-6 mt-6",children:[r("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2 dark:text-white",children:[t(h,{className:"text-brand dark:text-brand-dark"})," Profile"]}),r("div",{className:"space-y-6",children:[r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r("div",{className:"bg-gray-50 dark:bg-leet-input p-4 rounded",children:[t("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Role"}),t("p",{className:"text-lg font-medium capitalize dark:text-white",children:e.role})]}),r("div",{className:"bg-gray-50 dark:bg-leet-input p-4 rounded",children:[t("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Track / Group"}),r("p",{className:"text-lg font-medium dark:text-white",children:[e.trackId||"No Track"," / ",e.groupId||"No Group"]})]})]}),r("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"LeetCode Username"}),r("div",{className:"flex gap-2",children:[t("input",{type:"text",value:i,onChange:a=>c(a.target.value),placeholder:"e.g. mohamed",className:"flex-grow rounded-md border-gray-300 dark:border-leet-border dark:bg-leet-input dark:text-leet-text shadow-sm focus:border-brand focus:ring-brand sm:text-sm py-2 px-3"}),r("button",{onClick:x,disabled:m,className:"bg-brand hover:bg-brand-hover text-white px-4 py-2 rounded-md flex items-center gap-2 disabled:opacity-50",children:[t(b,{})," ",m?"Saving...":"Save"]})]}),t("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Used for syncing solved problems."})]}),r("div",{className:"border-t dark:border-leet-border pt-6",children:[r("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2 dark:text-white",children:[t(f,{className:"text-yellow-500"})," Trophy Case"]}),t("div",{className:"bg-gray-50 dark:bg-leet-input rounded-lg p-6 flex flex-wrap gap-4 justify-center min-h-[100px] items-center",children:e.badges&&e.badges.length>0?e.badges.map((a,s)=>r("div",{className:"flex flex-col items-center gap-1",children:[t(y,{name:a,size:"lg"}),t("span",{className:"text-xs font-medium dark:text-gray-300",children:a})]},s)):r("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[t(v,{className:"text-4xl mx-auto mb-2 opacity-20"}),t("p",{children:"Solve problems to earn badges!"})]})})]})]})]}):t("div",{children:"Loading..."})};export{B as default};
