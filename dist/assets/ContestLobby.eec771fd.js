import{r as d,j as e,d as t,L as c}from"./vendor-react.06bced68.js";import{u as b,z as y,M as f,P as w,Q as N,h as k}from"./index.17f04fdd.js";import{R as v,x as C,_ as T,I as A}from"./vendor-firebase.bbe5d1cc.js";import{B as L}from"./Breadcrumbs.63a79896.js";import"./vendor-ui.c6987468.js";function I(){const{userData:l,isAdmin:x}=b(),[i,p]=d.exports.useState([]),[m,g]=d.exports.useState(!0);d.exports.useEffect(()=>{const a=v(T(k,"contests"),C("startTime","desc"));return A(a,s=>{const u=s.docs.map(n=>({id:n.id,...n.data()})).filter(n=>n.targetGroup==="All"||(l==null?void 0:l.groupId)&&n.targetGroup===l.groupId);p(u),g(!1)})},[l]);const h=a=>{const r=new Date,s=new Date(a.startTime),o=new Date(a.endTime);return r<s?{label:"Upcoming",color:"bg-blue-100 text-blue-800"}:r>=s&&r<=o?{label:"Active",color:"bg-green-100 text-green-800 animate-pulse"}:{label:"Ended",color:"bg-gray-100 text-gray-800"}};return m?e("div",{className:"p-6 text-center",children:"Loading contests..."}):t("div",{className:"max-w-5xl mx-auto py-6 px-4",children:[e(L,{}),t("div",{className:"flex justify-between items-center mb-8",children:[t("h1",{className:"text-3xl font-bold flex items-center gap-2 dark:text-white",children:[e(y,{className:"text-yellow-500"})," Contest Lobby"]}),x&&t(c,{to:"/contests/create",className:"flex items-center gap-2 bg-brand hover:bg-brand-hover text-white font-bold py-2 px-4 rounded transition",children:[e(f,{})," Create Contest"]})]}),e("div",{className:"bg-white dark:bg-leet-card rounded-lg shadow overflow-hidden",children:e("div",{className:"overflow-x-auto",children:t("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-leet-border",children:[e("thead",{className:"bg-gray-50 dark:bg-leet-input",children:t("tr",{children:[e("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Contest Title"}),e("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Start Time"}),e("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Details"}),e("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Action"})]})}),t("tbody",{className:"divide-y divide-gray-200 dark:divide-leet-border bg-white dark:bg-leet-card",children:[i.map(a=>{var s;const r=h(a);return t("tr",{className:"hover:bg-gray-50 dark:hover:bg-leet-input transition-colors",children:[e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${r.color}`,children:r.label})}),t("td",{className:"px-6 py-4 whitespace-nowrap",children:[e("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:a.title}),t("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Target: ",a.targetGroup]})]}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t("div",{className:"flex items-center gap-1",children:[e(w,{}),e("span",{children:new Date(a.startTime).toLocaleString()})]})}),t("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[((s=a.problems)==null?void 0:s.length)||0," Problems"]}),e("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t(c,{to:`/contests/${a.id}`,className:"text-brand hover:text-brand-hover font-bold hover:underline",children:[r.label==="Ended"?"View Results":"Enter Arena"," ",e(N,{className:"inline ml-1"})]})})]},a.id)}),i.length===0&&e("tr",{children:e("td",{colSpan:"5",className:"px-6 py-10 text-center text-gray-500 dark:text-gray-400",children:"No contests found for your group."})})]})]})})})]})}export{I as default};
