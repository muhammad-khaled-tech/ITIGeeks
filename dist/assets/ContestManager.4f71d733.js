import{r as l,j as t,d as r}from"./vendor-react.06bced68.js";import{u as D,V as m,z as M,s as E,M as G,h as y}from"./index.17f04fdd.js";import{l as O,_ as k,v as U}from"./vendor-firebase.bbe5d1cc.js";import"./vendor-ui.c6987468.js";const z=()=>{const{isAdmin:v,currentUser:N}=D(),[n,u]=l.exports.useState(""),[i,p]=l.exports.useState(""),[c,g]=l.exports.useState(""),[h,S]=l.exports.useState("All"),[C,T]=l.exports.useState([]),[o,d]=l.exports.useState([{slug:"",score:m.MEDIUM}]),[b,x]=l.exports.useState(!1);l.exports.useEffect(()=>{(async()=>{const a=await O(k(y,"groups"));T(a.docs.map(s=>({id:s.id,...s.data()})))})()},[]);const P=()=>{d([...o,{slug:"",score:m.MEDIUM}])},A=e=>{const a=[...o];a.splice(e,1),d(a)},f=(e,a,s)=>{const w=[...o];w[e][a]=s,d(w)},I=async e=>{if(e.preventDefault(),!n||!i||!c)return alert("Please fill all fields");x(!0);try{await U(k(y,"contests"),{title:n,creatorId:N.uid,targetGroup:h,problems:o.filter(a=>a.slug.trim()!==""),startTime:new Date(i).toISOString(),endTime:new Date(c).toISOString(),status:"upcoming",createdAt:new Date().toISOString()}),alert("Contest Created!"),u(""),p(""),g(""),d([{slug:"",score:m.MEDIUM}])}catch(a){console.error(a),alert("Error creating contest")}finally{x(!1)}};return v?r("div",{className:"max-w-3xl mx-auto p-6 bg-white dark:bg-leet-card rounded-lg shadow mt-6",children:[r("h1",{className:"text-2xl font-bold mb-6 flex items-center gap-2 dark:text-white",children:[t(M,{className:"text-yellow-500"})," Create Contest"]}),r("form",{onSubmit:I,className:"space-y-6",children:[r("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Contest Title"}),t("input",{type:"text",value:n,onChange:e=>u(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:bg-leet-input dark:text-white shadow-sm p-2",required:!0})]}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Start Time"}),t("input",{type:"datetime-local",value:i,onChange:e=>p(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:bg-leet-input dark:text-white shadow-sm p-2",required:!0})]}),r("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"End Time"}),t("input",{type:"datetime-local",value:c,onChange:e=>g(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:bg-leet-input dark:text-white shadow-sm p-2",required:!0})]})]}),r("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Target Group"}),r("select",{value:h,onChange:e=>S(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:bg-leet-input dark:text-white shadow-sm p-2",children:[t("option",{value:"All",children:"All Groups"}),C.map(e=>t("option",{value:e.id,children:e.name},e.id))]})]}),r("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Problems"}),o.map((e,a)=>r("div",{className:"flex gap-2 mb-2",children:[t("input",{type:"text",placeholder:"LeetCode Slug (e.g. two-sum)",value:e.slug,onChange:s=>f(a,"slug",s.target.value),className:"flex-grow rounded-md border-gray-300 dark:bg-leet-input dark:text-white shadow-sm p-2"}),t("input",{type:"number",placeholder:"Score",value:e.score,onChange:s=>f(a,"score",parseInt(s.target.value)),className:"w-24 rounded-md border-gray-300 dark:bg-leet-input dark:text-white shadow-sm p-2"}),t("button",{type:"button",onClick:()=>A(a),className:"text-red-500 p-2 hover:bg-red-50 rounded",children:t(E,{})})]},a)),r("button",{type:"button",onClick:P,className:"text-brand dark:text-brand-dark text-sm font-medium flex items-center gap-1 mt-2",children:[t(G,{})," Add Problem"]})]}),t("button",{type:"submit",disabled:b,className:"w-full bg-brand hover:bg-brand-hover text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50",children:b?"Creating...":"Create Contest"})]})]}):t("div",{className:"text-red-500 p-6",children:"Access Denied"})};export{z as default};
