import{a,j as e,Q as v,S as y,L as N,u as b,r as d,P as k,O as A,R as D,y as S,z as L,B as $,H as j,x as C}from"./index.bed71268.js";const E=({assignment:t,progress:c,isStudent:g=!0})=>{const{title:u,deadline:o,problems:h,id:n}=t,r=h.length,s=c||0,l=Math.round(s/r*100)||0,i=new Date(o),m=new Date>i&&l<100,p=()=>{const w=new Date,x=i-w;if(x<0)return"Ended";const f=Math.floor(x/(1e3*60*60*24));return f>0?`${f} days left`:`${Math.floor(x/(1e3*60*60))} hours left`};return a("div",{className:`bg-white dark:bg-leet-card rounded-lg shadow-md p-4 border-l-4 ${m?"border-red-500":"border-brand"} hover:shadow-lg transition-shadow`,children:[a("div",{className:"flex justify-between items-start mb-2",children:[e("h3",{className:"font-bold text-lg dark:text-white",children:u}),m&&e(v,{className:"text-red-500",title:"Overdue"})]}),a("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 flex items-center gap-2",children:[e(y,{}),a("span",{className:m?"text-red-500 font-bold":"",children:[new Date(o).toLocaleDateString()," (",p(),")"]})]}),a("div",{className:"mb-4",children:[a("div",{className:"flex justify-between text-xs mb-1 dark:text-gray-300",children:[e("span",{children:"Progress"}),a("span",{children:[s,"/",r," Problems"]})]}),e("div",{className:"w-full bg-gray-200 dark:bg-leet-input rounded-full h-2.5",children:e("div",{className:`h-2.5 rounded-full ${l===100?"bg-green-500":m?"bg-red-500":"bg-brand"}`,style:{width:`${l}%`}})})]}),g?e(N,{to:`/assignments/${n}`,className:"block w-full text-center bg-gray-100 dark:bg-leet-input hover:bg-gray-200 dark:hover:bg-gray-700 text-brand dark:text-brand-dark font-medium py-2 rounded transition-colors",children:"View Details"}):a("div",{className:"text-center text-sm text-gray-500",children:["Target: ",t.targetGroup]})]})},F=()=>{const{userData:t}=b(),[c,g]=d.exports.useState([]),[u,o]=d.exports.useState(!0);d.exports.useEffect(()=>{(async()=>{if(!!t){o(!0);try{const r=D(S(L,"assignments"),$("targetGroup","in",[t.groupId||"All","All"]),j("deadline","asc")),s=await C(r);g(s.docs.map(l=>({id:l.id,...l.data()})))}catch(r){console.error(r)}finally{o(!1)}}})()},[t]);const h=n=>{if(!(t!=null&&t.problems))return 0;new Set(t.problems.filter(s=>s.status==="Done").map(s=>s.title.toLowerCase().replace(/\s+/g,"-")));let r=0;return n.forEach(s=>{t.problems.some(i=>i.title===s.title&&i.status==="Done")&&r++}),r};return u?e("div",{className:"p-10 text-center dark:text-white",children:"Loading Assignments..."}):a("div",{className:"max-w-6xl mx-auto p-6",children:[a("h1",{className:"text-3xl font-bold mb-8 flex items-center gap-2 dark:text-white",children:[e(k,{className:"text-brand"})," My Assignments"]}),c.length===0?e("div",{className:"text-center py-10 bg-white dark:bg-leet-card rounded shadow",children:e("p",{className:"text-gray-500 dark:text-gray-400",children:"No active assignments."})}):e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(n=>e(E,{assignment:n,progress:h(n.problems)},n.id))})]})},O=()=>{const{assignmentId:t}=A();return b(),d.exports.useState(null),d.exports.useState(!0),d.exports.useEffect(()=>{},[t]),e("div",{className:"p-6 text-center",children:"Detail View Coming Soon (Use the card view for now)"})};export{O as AssignmentDetail,F as default};
