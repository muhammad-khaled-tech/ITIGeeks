import{r as l,j as t,b as r}from"./vendor-react.0fccfa0d.js";import{u as G,q as D,n as I,z as q,B as w}from"./index.13f27af4.js";import{f as E,h as y,p as j}from"./vendor-firebase.278f80a4.js";import"./vendor-ui.218f6aa3.js";const L=()=>{const{isAdmin:k,currentUser:v}=G(),[n,m]=l.exports.useState(""),[i,u]=l.exports.useState(""),[c,p]=l.exports.useState(""),[g,N]=l.exports.useState("All"),[C,S]=l.exports.useState([]),[o,d]=l.exports.useState([{slug:"",score:100}]),[h,b]=l.exports.useState(!1);l.exports.useEffect(()=>{(async()=>{const a=await E(y(w,"groups"));S(a.docs.map(s=>({id:s.id,...s.data()})))})()},[]);const T=()=>{d([...o,{slug:"",score:100}])},P=e=>{const a=[...o];a.splice(e,1),d(a)},x=(e,a,s)=>{const f=[...o];f[e][a]=s,d(f)},A=async e=>{if(e.preventDefault(),!n||!i||!c)return alert("Please fill all fields");b(!0);try{await j(y(w,"contests"),{title:n,creatorId:v.uid,targetGroup:g,problems:o.filter(a=>a.slug.trim()!==""),startTime:new Date(i).toISOString(),endTime:new Date(c).toISOString(),status:"upcoming",createdAt:new Date().toISOString()}),alert("Contest Created!"),m(""),u(""),p(""),d([{slug:"",score:100}])}catch(a){console.error(a),alert("Error creating contest")}finally{b(!1)}};return k?r("div",{className:"max-w-3xl mx-auto p-6 bg-white dark:bg-leet-card rounded-lg shadow mt-6",children:[r("h1",{className:"text-2xl font-bold mb-6 flex items-center gap-2 dark:text-white",children:[t(D,{className:"text-yellow-500"})," Create Contest"]}),r("form",{onSubmit:A,className:"space-y-6",children:[r("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Contest Title"}),t("input",{type:"text",value:n,onChange:e=>m(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:bg-leet-input dark:text-white shadow-sm p-2",required:!0})]}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Start Time"}),t("input",{type:"datetime-local",value:i,onChange:e=>u(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:bg-leet-input dark:text-white shadow-sm p-2",required:!0})]}),r("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"End Time"}),t("input",{type:"datetime-local",value:c,onChange:e=>p(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:bg-leet-input dark:text-white shadow-sm p-2",required:!0})]})]}),r("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Target Group"}),r("select",{value:g,onChange:e=>N(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:bg-leet-input dark:text-white shadow-sm p-2",children:[t("option",{value:"All",children:"All Groups"}),C.map(e=>t("option",{value:e.id,children:e.name},e.id))]})]}),r("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Problems"}),o.map((e,a)=>r("div",{className:"flex gap-2 mb-2",children:[t("input",{type:"text",placeholder:"LeetCode Slug (e.g. two-sum)",value:e.slug,onChange:s=>x(a,"slug",s.target.value),className:"flex-grow rounded-md border-gray-300 dark:bg-leet-input dark:text-white shadow-sm p-2"}),t("input",{type:"number",placeholder:"Score",value:e.score,onChange:s=>x(a,"score",parseInt(s.target.value)),className:"w-24 rounded-md border-gray-300 dark:bg-leet-input dark:text-white shadow-sm p-2"}),t("button",{type:"button",onClick:()=>P(a),className:"text-red-500 p-2 hover:bg-red-50 rounded",children:t(I,{})})]},a)),r("button",{type:"button",onClick:T,className:"text-brand dark:text-brand-dark text-sm font-medium flex items-center gap-1 mt-2",children:[t(q,{})," Add Problem"]})]}),t("button",{type:"submit",disabled:h,className:"w-full bg-brand hover:bg-brand-hover text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50",children:h?"Creating...":"Create Contest"})]})]}):t("div",{className:"text-red-500 p-6",children:"Access Denied"})};export{L as default};
