import{b as a,j as e,L as w,r as p}from"./vendor-react.beb85f38.js";import{L as y,M as v,u as N,K as k,B as A}from"./index.50c1789f.js";import{R as D,h as L,j,f as M}from"./vendor-firebase.278f80a4.js";import"./vendor-ui.24a42a1c.js";const $=({assignment:t,progress:g,isStudent:h=!0})=>{const{title:u,deadline:i,problems:f,id:n}=t,r=f.length,c=g||0,d=Math.round(c/r*100)||0,s=new Date(i),l=new Date>s&&d<100,b=()=>{const x=new Date,o=s-x;if(o<0)return"Ended";const m=Math.floor(o/(1e3*60*60*24));return m>0?`${m} days left`:`${Math.floor(o/(1e3*60*60))} hours left`};return a("div",{className:`bg-white dark:bg-leet-card rounded-lg shadow-md p-4 border-l-4 ${l?"border-red-500":"border-brand"} hover:shadow-lg transition-shadow`,children:[a("div",{className:"flex justify-between items-start mb-2",children:[e("h3",{className:"font-bold text-lg dark:text-white",children:u}),l&&e(y,{className:"text-red-500",title:"Overdue"})]}),a("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 flex items-center gap-2",children:[e(v,{}),a("span",{className:l?"text-red-500 font-bold":"",children:[new Date(i).toLocaleDateString()," (",b(),")"]})]}),a("div",{className:"mb-4",children:[a("div",{className:"flex justify-between text-xs mb-1 dark:text-gray-300",children:[e("span",{children:"Progress"}),a("span",{children:[c,"/",r," Problems"]})]}),e("div",{className:"w-full bg-gray-200 dark:bg-leet-input rounded-full h-2.5",children:e("div",{className:`h-2.5 rounded-full ${d===100?"bg-green-500":l?"bg-red-500":"bg-brand"}`,style:{width:`${d}%`}})})]}),h?e(w,{to:`/assignments/${n}`,className:"block w-full text-center bg-gray-100 dark:bg-leet-input hover:bg-gray-200 dark:hover:bg-gray-700 text-brand dark:text-brand-dark font-medium py-2 rounded transition-colors",children:"View Details"}):a("div",{className:"text-center text-sm text-gray-500",children:["Target: ",t.targetGroup]})]})},B=()=>{const{userData:t}=N(),[g,h]=p.exports.useState([]),[u,i]=p.exports.useState(!0);p.exports.useEffect(()=>{(async()=>{if(!!t){i(!0);try{const r=D(L(A,"assignments"),j("targetGroup","in",[t.groupId||"All","All"])),d=(await M(r)).docs.map(s=>({id:s.id,...s.data()}));d.sort((s,l)=>{var o,m;const b=((o=s.deadline)==null?void 0:o.seconds)||0,x=((m=l.deadline)==null?void 0:m.seconds)||0;return b-x}),h(d)}catch(r){console.error(r)}finally{i(!1)}}})()},[t]);const f=n=>{if(!(t!=null&&t.problems))return 0;let r=0;return n.forEach(c=>{t.problems.some(s=>s.title===c.title&&s.status==="Done")&&r++}),r};return u?e("div",{className:"p-10 text-center dark:text-white",children:"Loading Assignments..."}):a("div",{className:"max-w-6xl mx-auto p-6",children:[a("h1",{className:"text-3xl font-bold mb-8 flex items-center gap-2 dark:text-white",children:[e(k,{className:"text-brand"})," My Assignments"]}),g.length===0?e("div",{className:"text-center py-10 bg-white dark:bg-leet-card rounded shadow",children:e("p",{className:"text-gray-500 dark:text-gray-400",children:"No active assignments."})}):e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(n=>e($,{assignment:n,progress:f(n.problems)},n.id))})]})};export{B as default};
